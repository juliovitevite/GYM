<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Gym Tracker - Elite Master</title>
    
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2936/2936886.png">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2936/2936886.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Gym Elite">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22GymElite%22,%22short_name%22:%22GymElite%22,%22start_url%22:%22index.html%22,%22display%22:%22standalone%22,%22background_color%22:%22%2309090b%22,%22theme_color%22:%22%2309090b%22}">

    <style>
        :root {
            --bg-color: #09090b;
            --card-bg: #18181b;
            --text-main: #fafafa;
            --text-dim: #71717a;
            --hero-color: #f97316;
            --accent-soft: rgba(249, 115, 22, 0.1);
            --border-style: 1px solid #27272a;
            --status-gray: #3f3f46;
            --status-green: #22c55e;
            --status-red: #ef4444;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0; 
            padding: 15px; 
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            overflow-x: hidden;
            transition: box-shadow 1s;
        }

        body.beast-mode { box-shadow: inset 0 0 60px rgba(249, 115, 22, 0.4); }

        header { position: relative; text-align: center; margin-bottom: 15px; padding-bottom: 15px; border-bottom: var(--border-style); }
        h1 { margin: 0; font-size: 1.3rem; color: var(--hero-color); letter-spacing: 2px; text-transform: uppercase; font-weight: 900; }
        .beast-mode h1 { text-shadow: 0 0 15px var(--hero-color); animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        .btn-update-top {
            position: absolute; right: 0; top: 0; background: var(--card-bg);
            border: 1px solid var(--hero-color); color: var(--hero-color);
            border-radius: 8px; width: 35px; height: 35px; cursor: pointer; font-size: 1rem;
        }
        
        .row-dates { display: flex; justify-content: center; gap: 10px; margin-top: 15px; }
        input[type="date"] {
            background: #27272a; border: 1px solid #3f3f46; color: var(--text-main);
            border-radius: 8px; padding: 6px; font-size: 0.75rem; color-scheme: dark;
        }

        .date-label { font-size: 0.55rem; color: var(--hero-color); font-weight: bold; text-transform: uppercase; display: block; margin-bottom: 4px; }

        .weight-container { 
            background: var(--accent-soft); padding: 6px 12px; border-radius: 20px; 
            margin: 12px auto; border: 1px solid var(--hero-color); display: inline-block;
        }
        .weight-input { color: var(--text-main); font-weight: 800; width: 55px; background: transparent; border: none; text-align: center; outline: none; }

        .attendance-container { display: flex; justify-content: center; gap: 10px; margin-top: 5px; }
        .att-btn {
            width: 35px; height: 35px; border-radius: 8px; border: none;
            background: var(--status-gray); color: white; font-weight: 900; transition: 0.3s;
        }
        .att-btn.green { background: var(--status-green); box-shadow: 0 0 15px var(--status-green); }
        .att-btn.red { background: var(--status-red); }

        .nav-container { display: flex; gap: 10px; margin: 15px 0; }
        .nav-btn {
            flex: 1; padding: 12px; border-radius: 10px; border: 1px solid #3f3f46;
            background: var(--card-bg); color: var(--text-dim); font-weight: bold;
        }
        .nav-btn.active { background: var(--hero-color); color: #000; }

        .exercise-list { display: none; flex-direction: column; gap: 10px; }
        .exercise-list.active { display: flex; }

        .exercise-card {
            background: var(--card-bg); border-radius: 14px; padding: 10px;
            display: flex; align-items: center; gap: 12px; border: var(--border-style);
        }
        .exercise-img { width: 50px; height: 50px; border-radius: 8px; border: 1px solid #3f3f46; object-fit: cover; }
        .exercise-info { flex: 1; }
        .exercise-name { font-size: 0.85rem; font-weight: 700; color: var(--text-main); background: transparent; border: none; width: 100%; margin-bottom: 5px; outline: none; }

        .stats-container { display: flex; gap: 8px; }
        .stat-box { flex: 1; background: #09090b; padding: 5px; border-radius: 8px; border: 1px solid #27272a; text-align: center; }
        .stat-label { font-size: 0.5rem; color: var(--text-dim); display: block; }
        
        .val { 
            width: 100%; background: transparent; border: none; text-align: center; 
            color: var(--text-main); font-weight: 600; outline: none; font-size: 0.75rem; 
        }
        .val::placeholder { color: var(--text-dim); opacity: 0.5; font-weight: 400; }
        .current-input { color: var(--hero-color) !important; }

        #custom-modal, #victory-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1000; align-items: center; justify-content: center;
        }
        #custom-modal { background: rgba(0,0,0,0.8); }
        #victory-overlay { background: rgba(0,0,0,0.95); flex-direction: column; text-align: center; padding: 20px; }
        
        .modal-content { background: var(--card-bg); border: 1px solid var(--hero-color); padding: 25px; border-radius: 20px; width: 80%; max-width: 300px; text-align: center; }
        .m-btn { padding: 10px 20px; border-radius: 10px; border: none; font-weight: bold; margin: 5px; cursor: pointer; }
        
        .victory-msg { color: var(--hero-color); font-size: 1.6rem; font-weight: 900; text-transform: uppercase; margin-top: 20px; }
        .victory-sub { color: white; font-style: italic; margin-top: 15px; line-height: 1.5; font-size: 1rem; max-width: 80%; }

        .particle { position: fixed; pointer-events: none; z-index: 1100; font-size: 24px; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg); opacity: 0; } }
    </style>
</head>
<body id="main-body">

    <header>
        <h1 id="routine-title">DORSO</h1>
        <button class="btn-update-top" onclick="openModal()">üîÑ</button>
        <div class="row-dates">
            <div class="date-item">
                <span class="date-label">Anterior</span>
                <input type="date" id="date-ant" onchange="updateRoutineDates()">
            </div>
            <div class="date-item">
                <span class="date-label">Hoy</span>
                <input type="date" id="date-hoy" onchange="updateRoutineDates()">
            </div>
        </div>
        <div class="weight-container">
            <span class="date-label" style="color:white; margin:0; display:inline">PESO:</span>
            <input type="text" id="user-weight" class="weight-input" oninput="saveGlobalWeight()">
        </div>
        <div class="attendance-container">
            <button class="att-btn" onclick="toggleAttendance(0)">D</button>
            <button class="att-btn" onclick="toggleAttendance(1)">P</button>
            <button class="att-btn" onclick="toggleAttendance(2)">D</button>
            <button class="att-btn" onclick="toggleAttendance(3)">P</button>
        </div>
    </header>

    <nav class="nav-container">
        <button class="nav-btn active" id="btn-dorso" onclick="showRoutine('dorso')">DORSO</button>
        <button class="nav-btn" id="btn-pierna" onclick="showRoutine('pierna')">PIERNA</button>
    </nav>

    <div id="dorso-list" class="exercise-list active"></div>
    <div id="pierna-list" class="exercise-list"></div>

    <div id="custom-modal">
        <div class="modal-content">
            <p>¬øPasar datos de HOY a ANTERIOR?</p>
            <button class="m-btn" style="background:#3f3f46; color:white" onclick="closeModal()">NO</button>
            <button class="m-btn" style="background:var(--hero-color)" onclick="shiftData()">S√ç</button>
        </div>
    </div>

    <div id="victory-overlay" onclick="closeVictory()">
        <div id="victory-icon-big" style="font-size: 80px;">üèÜ</div>
        <div class="victory-msg">¬°BESTIA DESBLOQUEADA!</div>
        <div id="victory-quote" class="victory-sub"></div>
        <p style="font-size: 0.7rem; color: var(--text-dim); margin-top: 40px;">Toca para continuar</p>
    </div>

    <script>
        const FRASES = [
            "La disciplina es el puente entre tus metas y tus logros.",
            "No te detengas cuando duela, detente cuando hayas terminado.",
            "El dolor es temporal, el orgullo es para siempre.",
            "Hoy has vencido al villano m√°s fuerte: tu propia mente.",
            "4 de 4. Eres parte del 1% que no pone excusas.",
            "Tu cuerpo es el reflejo de tu disciplina.",
            "Los l√≠mites solo existen si t√∫ los permites.",
            "Semana perfecta. Los stacks de Hero est√°n al m√°ximo.",
            "La constancia es lo que convierte lo ordinario en extraordinario.",
            "Fuerza, coraje y voluntad. Hoy lo demostraste todo."
        ];

        const ICON_SETS = [["üí™", "üî•", "üèãÔ∏è"], ["‚ö°", "üèÜ", "‚ú®"], ["üëë", "üíé", "ü¶Å"], ["‚öîÔ∏è", "üî±", "üßø"]];
        
        // BASE DE DATOS MANUAL PARA EDITAR IM√ÅGENES UNA A UNA
        const defaultWorkouts = {
            dorso: [
                { name: "PRESS PLANO", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR2IeeZS4HvXUvKMQ7ll9rMHT2ZwljqFEaP3w&usqp=CAU", prev: "", current: "" },
                { name: "PRESS INCLINADO", img: "https://st2.depositphotos.com/8546304/11406/i/950/depositphotos_114060930-stock-photo-dumbbell-bench-press-while-lying.jpg", prev: "", current: "" },
                { name: "PEC FLY MAQUINA", img: "https://static.strengthlevel.com/images/exercises/machine-chest-fly/machine-chest-fly-800.jpg", prev: "", current: "" },
                { name: "Remo Gironda", img: "REMO.jpg", prev: "", current: "" },
                { name: "Pull Over Polea", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQgiqPs09oMkL1-jclhgou7nTnapMCfy8bG7aSkLc9qCA&s=10", prev: "", current: "" },
                { name: "Remo Mancuerna", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR2IeeZS4HvXUvKMQ7ll9rMHT2ZwljqFEaP3w&usqp=CAU", prev: "", current: "" },
                { name: "Facepull", img: "https://via.placeholder.com/100/18181b/f97316?text=7", prev: "", current: "" },
                { name: "P√°jaros", img: "https://via.placeholder.com/100/18181b/f97316?text=8", prev: "", current: "" },
                { name: "Encogimientos", img: "https://via.placeholder.com/100/18181b/f97316?text=9", prev: "", current: "" },
                { name: "Hiperextensiones", img: "https://via.placeholder.com/100/18181b/f97316?text=10", prev: "", current: "" },
                { name: "Remo en T", img: "https://via.placeholder.com/100/18181b/f97316?text=11", prev: "", current: "" },
                { name: "Jal√≥n Supino", img: "https://via.placeholder.com/100/18181b/f97316?text=12", prev: "", current: "" },
                { name: "Peso Muerto", img: "https://via.placeholder.com/100/18181b/f97316?text=13", prev: "", current: "" }
            ],
            pierna: [
                { name: "Sentadilla Libre", img: "https://via.placeholder.com/100/18181b/f97316?text=P1", prev: "", current: "" },
                { name: "Prensa 45¬∞", img: "https://via.placeholder.com/100/18181b/f97316?text=P2", prev: "", current: "" },
                { name: "Extensi√≥n Cu√°driceps", img: "https://via.placeholder.com/100/18181b/f97316?text=P3", prev: "", current: "" },
                { name: "Curl Femoral", img: "https://via.placeholder.com/100/18181b/f97316?text=P4", prev: "", current: "" },
                { name: "Peso Muerto Rumano", img: "https://via.placeholder.com/100/18181b/f97316?text=P5", prev: "", current: "" },
                { name: "Zancadas", img: "https://via.placeholder.com/100/18181b/f97316?text=P6", prev: "", current: "" },
                { name: "Gemelos Sentado", img: "https://via.placeholder.com/100/18181b/f97316?text=P7", prev: "", current: "" },
                { name: "Aductores M√°quina", img: "https://via.placeholder.com/100/18181b/f97316?text=P8", prev: "", current: "" }
            ]
        };

        let workouts = JSON.parse(localStorage.getItem('gymDataV10')) || defaultWorkouts;
        let attendance = JSON.parse(localStorage.getItem('gymAttendanceV10')) || [0, 0, 0, 0];
        let routineDates = JSON.parse(localStorage.getItem('routineDatesV10')) || { dorso: { ant: "", hoy: "" }, pierna: { ant: "", hoy: "" } };
        let globalWeight = localStorage.getItem('globalWeightV10') || "75kg";

        function init() {
            document.getElementById('user-weight').value = globalWeight;
            showRoutine('dorso');
            renderList('dorso', 'dorso-list');
            renderList('pierna', 'pierna-list');
            updateAttendanceUI();
        }

        function renderList(type, id) {
            const container = document.getElementById(id);
            container.innerHTML = workouts[type].map((ex, i) => `
                <div class="exercise-card">
                    <img src="${ex.img}" class="exercise-img">
                    <div class="exercise-info">
                        <input class="exercise-name" value="${ex.name}" oninput="workouts['${type}'][${i}].name=this.value; save()">
                        <div class="stats-container">
                            <div class="stat-box">
                                <span class="stat-label">ANT</span>
                                <input class="val" placeholder="---" value="${ex.prev}" onfocus="this.select()" oninput="workouts['${type}'][${i}].prev=this.value; save()">
                            </div>
                            <div class="stat-box current">
                                <span class="stat-label" style="color:var(--hero-color)">HOY</span>
                                <input class="val current-input" placeholder="---" value="${ex.current}" onfocus="this.select()" oninput="workouts['${type}'][${i}].current=this.value; save()">
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function toggleAttendance(i) {
            attendance[i] = (attendance[i] + 1) % 3;
            save();
            updateAttendanceUI();
            if (attendance.every(val => val === 1)) triggerVictory();
        }

        function updateAttendanceUI() {
            const btns = document.querySelectorAll('.att-btn');
            btns.forEach((btn, i) => {
                btn.className = 'att-btn' + (attendance[i] === 1 ? ' green' : attendance[i] === 2 ? ' red' : '');
            });
        }

        function triggerVictory() {
            document.getElementById('main-body').classList.add('beast-mode');
            const overlay = document.getElementById('victory-overlay');
            const quote = document.getElementById('victory-quote');
            const iconSet = ICON_SETS[Math.floor(Math.random() * ICON_SETS.length)];
            
            quote.innerText = FRASES[Math.floor(Math.random() * FRASES.length)];
            document.getElementById('victory-icon-big').innerText = iconSet[Math.floor(Math.random() * iconSet.length)];
            overlay.style.display = 'flex';

            for(let i=0; i<50; i++) createParticle(iconSet[Math.floor(Math.random()*iconSet.length)]);
        }

        function closeVictory() {
            document.getElementById('victory-overlay').style.display = 'none';
            document.getElementById('main-body').classList.remove('beast-mode');
            attendance = [0, 0, 0, 0];
            save();
            updateAttendanceUI();
        }

        function createParticle(char) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerText = char;
            p.style.left = Math.random() * 100 + 'vw';
            p.style.top = '-5vh';
            p.style.animationDuration = (Math.random() * 2 + 3) + 's';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 5000);
        }

        function shiftData() {
            workouts[currentActiveRoutine].forEach(ex => {
                if(ex.current) ex.prev = ex.current;
                ex.current = "";
            });
            save();
            renderList(currentActiveRoutine, currentActiveRoutine + '-list');
            closeModal();
        }

        function showRoutine(type) {
            currentActiveRoutine = type;
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-' + type).classList.add('active');
            document.getElementById('dorso-list').style.display = type === 'dorso' ? 'flex' : 'none';
            document.getElementById('pierna-list').style.display = type === 'pierna' ? 'flex' : 'none';
            document.getElementById('routine-title').innerText = type;
            document.getElementById('date-ant').value = routineDates[type].ant;
            document.getElementById('date-hoy').value = routineDates[type].hoy;
        }

        function save() { 
            localStorage.setItem('gymDataV10', JSON.stringify(workouts)); 
            localStorage.setItem('gymAttendanceV10', JSON.stringify(attendance));
            localStorage.setItem('routineDatesV10', JSON.stringify(routineDates));
        }
        function saveGlobalWeight() { localStorage.setItem('globalWeightV10', document.getElementById('user-weight').value); }
        function updateRoutineDates() {
            routineDates[currentActiveRoutine].ant = document.getElementById('date-ant').value;
            routineDates[currentActiveRoutine].hoy = document.getElementById('date-hoy').value;
            save();
        }
        function openModal() { document.getElementById('custom-modal').style.display = 'flex'; }
        function closeModal() { document.getElementById('custom-modal').style.display = 'none'; }

        init();
    </script>
</body>
</html>
